{
  "name": "sol",
  "scopeName": "source.sop",
  "scopeNameComment": "Syntax highlighting for Semantic Operations Language (.sop) files",
  "patterns": [
    {
      "include": "#sol-header"
    },
    {
      "include": "#keywords"
    },
    {
      "include": "#comments"
    },
    {
      "include": "#fields"
    },
    {
      "include": "#values"
    },
    {
      "include": "#references"
    },
    {
      "include": "#semantic-operators"
    }
  ],
  "repository": {
    "sol-header": {
      "patterns": [
        {
          "match": "^#\\s*(SOL)\\s*-\\s*(Semantic\\s*Operations\\s*Language).*$",
          "captures": {
            "1": {
              "name": "keyword.control.sop.header"
            },
            "2": {
              "name": "string.quoted.double.sop.header"
            }
          },
          "name": "comment.line.sop.header"
        }
      ]
    },
    "comments": {
      "patterns": [
        {
          "begin": "#",
          "beginCaptures": {
            "0": {
              "name": "punctuation.definition.comment.sop"
            }
          },
          "end": "$\\n?",
          "name": "comment.line.number-sign.sop"
        }
      ]
    },
    "fields": {
      "patterns": [
        {
          "match": "\\b(id|content|description|steps|actors|type|vision|premise|measurement|unit|goal|issuedBy|reason|timestamp|author|date|language|tags|capabilities|domain|indicators|policies|processes)\\b",
          "name": "variable.parameter.sop"
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "match": "\\b(Vision|Domain|Concept|Policy|Process|Actor|Indicator|Result|Signal|Observation|Authority|Protocol|Area)\\b",
          "name": "keyword.control.sop.artifact"
        },
        {
          "match": "\\b(coherence|traceability|semantic|narrative|strategic|documentation)\\b",
          "name": "keyword.other.sop.principle"
        }
      ]
    },
    "values": {
      "patterns": [
        {
          "match": "\\b([A-Z][a-zA-Z0-9_]*[a-zA-Z0-9])\\b",
          "name": "constant.language.sop.identifier"
        },
        {
          "match": "\"([^\"\\\\]|\\\\.)*\"",
          "name": "string.quoted.double.sop"
        },
        {
          "match": "'([^'\\\\]|\\\\.)*'",
          "name": "string.quoted.single.sop"
        }
      ]
    },
    "references": {
      "patterns": [
        {
          "match": "\\b(vision|domain|actors|issuedBy):\\s*([A-Z][a-zA-Z0-9_]*)",
          "captures": {
            "1": {
              "name": "variable.parameter.sop"
            },
            "2": {
              "name": "entity.name.function.sop.reference"
            }
          }
        },
        {
          "match": "\\((Policy|Process|Actor|Vision|Domain|Area):\\s*([A-Z][a-zA-Z0-9_]*)\\)",
          "captures": {
            "1": {
              "name": "keyword.control.sop.artifact"
            },
            "2": {
              "name": "entity.name.function.sop.reference"
            }
          }
        }
      ]
    },
    "semantic-operators": {
      "patterns": [
        {
          "match": "->|→|=>|⇒|⟶",
          "name": "keyword.operator.sop.flow"
        },
        {
          "match": "\\b([A-Z][a-zA-Z0-9_]*)\\s*(\\([^)]*\\))?\\s*([->→])",
          "captures": {
            "1": {
              "name": "entity.name.function.sop.actor"
            },
            "2": {
              "name": "comment.block.sop.context"
            },
            "3": {
              "name": "keyword.operator.sop.flow"
            }
          }
        }
      ]
    }
  }
}
